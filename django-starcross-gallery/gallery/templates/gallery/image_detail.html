{% extends "base.html" %}
{% load static %}
{% load comments %}
{% load comments_xtd %}

{% block title %}
    {% if album %}{{ album.title }} - {% endif %}{{ image.title }}
{% endblock %}
<!--
{% block header %}

    <link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}{% url 'gallery:image_detail' image.pk image.slug %}">

    <script type="text/javascript">
        {% if previous_image %}
            previous_image_url = '{% url 'gallery:album_image_detail' apk previous_image.pk previous_image.slug %}#image_{{ previous_image.pk }}';
        {% endif %}
        {% if next_image %}
            next_image_url = '{% url 'gallery:album_image_detail' apk next_image.pk next_image.slug %}#image_{{ next_image.pk }}';
        {% endif %}
    </script>
    <script type="text/javascript" src="{% static 'gallery/js/image_navigation.js' %}"></script>
    <style>
    body, html {
        height: 100%;
        overflow: hidden;
    }
    #footer {
        display: none;
    }
    #content {
        padding-bottom: 0;
        width: 100%;
    }
    </style>

{% endblock %}
-->
<!--
{% block bar_detail %}
    {% if image.exif.Camera %}
        <img class="exif_icon" src="{% static 'gallery/images/camera.png' %}" title="Camera"/>
        {{ image.exif.Camera }}
    {% endif %}
    {% if image.exif.LensModel %}
        <img class="exif_icon" src="{% static 'gallery/images/lens.png' %}" title="Lens"/>
        {{ image.exif.LensModel }}
    {% endif %}
    {% if image.exif.FocalLengthIn35mmFilm %}
        <img class="exif_icon" src="{% static 'gallery/images/35mm.png' %}" title="Focal Length (35mm)"/>
        {{ image.exif.FocalLengthIn35mmFilm }}mm
    {% endif %}
    {% if image.exif.Aperture %}
        <img class="exif_icon" src="{% static 'gallery/images/aperture.png' %}" title="Aperture"/>
        F/{{ image.exif.Aperture }}
    {% endif %}
    {% if image.exif.Exposure %}
        <img class="exif_icon" src="{% static 'gallery/images/exposure.png' %}" title="Exposure"/>
        {{ image.exif.Exposure }}s
    {% endif %}
    {% if image.exif.ISOSpeedRatings %}
        <img class="exif_icon" src="{% static 'gallery/images/iso.png' %}" title="ISO"/>
        ISO {{ image.exif.ISOSpeedRatings }}
    {% endif %}
{% endblock %}

-->
<!--
{% block bar_title %}
    <div id="title">
        {% if album %}
            <a href="{% url 'gallery:album_detail' apk album.slug %}">
            {{ album.title }}
            </a>
            -
        {% endif %}
        {{ image.title }}
    </div>
{% endblock %}
-->
{% block content %}
<div class="container-fluid overflow-auto my-4 mb-2"/>
<div class="row">
<!-- The information is to the left -->
<div class="col-sm-6">
<div class="card border-0 my-auto mx-auto" style="width:30rem;"/>
<h2 class="title_font title_color my-auto mx-lg-n5">{{ image.title }}</h2>

<h4 class="font-weight-light title_font text-secondary mx-lg-n5 mb-2">Culture: <span class="title_font title_color"/>{{ image.get_culture_display }}</span></h4>
<h4 class="font-weight-light title_font text-secondary mx-lg-n5 mb-2">Period: <span class="title_font title_color"/>{{ image.get_period_display }}</span></h4>
<h4 class="font-weight-light title_font text-secondary mx-lg-n5 mb-2">Material: <span class="title_font title_color"/>{{ image.get_material_display }}</span></h4>
{% if image.date %}
<h4 class="font-weight-light title_font text-secondary mx-lg-n5 mb-2">Dates: <span class="title_font title_color"/>{{ image.date }}</span></h4>
{% endif %}
<h4 class="font-weight-light title_font text-secondary mx-lg-n5 mb-2">Object Type: <span class="title_font title_color"/>{{ image.get_object_type }}</span></h4>
{% if image.artist_or_attribution  %}
<h4 class="font-weight-light title_font text-secondary mx-lg-n5 mb-2">Artist: <span class="title_font title_color"/>{{ image.artist_or_attribution }}</span></h4>
{% endif %}
<p class="mx-lg-n5 text-left p_font mt-3">{{ image.description }}</p>
</div><!--End of Card-->
</div><!--End of column-->
<!-- The photo is right aligned -->
<div class="col-sm-6">
<a href="{{ image.data.url }}">
<div class="card border-0  my-auto" style="height:100%; width:44rem;">
    <img class="card-img-top" id="image_preview" src="{{ image.data_preview.url }}" alt="{{ image.title }}"/>
</div><!--End of card-->
</a>
</div><!--End of Col-->

</div> <!--End of row-->

<div class="row justify-content-end">
<div class="col-sm-6">

{% get_comment_count for object as comment_count %}
<!--
<div class="py-4 text-center">

  {{ comment_count }} comment{{ comment_count|pluralize }}

  ha{{ comment_count|pluralize:"s,ve" }} been posted.

</div>
-->
{% if comment_count %}


<div id="comments" class="comments" style="width:44rem;">
<hr/>

<ul class="media-list">

  {% render_xtdcomment_tree for object allow_feedback show_feedback %}

</ul>

</div>


{% endif %}


{% if user.is_authenticated %}
<div class="card card-block mb-5" style="width:44rem;">

  <div class="card-body">

    <h4 class="card-title title_font text-center pb-3">Share your thoughts!</h4>

      {% render_comment_form for object %}

  </div>

</div>
{% else %}
      <p class="text-center my-3" style="width:44rem;">

        Only registered users can post comments. Please

        <a class="text-greenlink" href="/login/?next={{ object.get_absolute_url }}">login</a>
	
	or

        <a class="text-greenlink" href="/register/?next={{ object.get_absolute_url }}">register</a>.
      </p>

    {% endif %}

</div>
</div>


<div class="container container-small">
	<h3 class="title_font title_color mt-5 mb-3 text-left">Object Details</h3>
	<hr>
</div>






<!--
<div id="album_preview">
{% if album_images %}

    {% for image in album_images %}
        <a href="{% url 'gallery:album_image_detail' apk image.pk image.slug %}#image_{{ image.pk }}" style="display: inline-block;">
            {% include 'gallery/partials/thumbnail_preview.html' %}
       </a>
    {% endfor %}

{% elif albums %}

    {% for album in albums %}

        {% with album.display_highlight as image %}

        <a href="{% url 'gallery:album_detail' album.pk album.slug  %}" style="display: inline-block;">
            {% include 'gallery/partials/thumbnail_preview.html' %}
        </a>

        {% endwith %}

    {% endfor %}


{% endif %}
 </div>
-->
</div><!--End of container-->

{% endblock %}

{% block extra-js %}

<script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>

<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>

<script>

 window.comments_props = {% get_commentbox_props for object %};

 window.comments_props_override = {

     allow_comments: {%if object.allow_comments%}true{%else%}false{%endif%},

     allow_feedback: true,

     show_feedback: true,

     allow_flagging: true,

     polling_interval: 5000  // In milliseconds.

 };

</script>

<script

  src="https://code.jquery.com/jquery-3.3.1.min.js"

  crossorigin="anonymous"></script>

<script

  src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"

  integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"

  crossorigin="anonymous"></script>

<script

  src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"

  integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"

  crossorigin="anonymous"></script>

<script

  type="text/javascript"

  src="{% url 'javascript-catalog' %}"></script>

<script src="{% static 'django_comments_xtd/js/vendor~plugin-2.7.0.js' %}"></script>

<script src="{% static 'django_comments_xtd/js/plugin-2.7.0.js' %}"></script>

<script>

$(function() {

  $('[data-toggle="tooltip"]').tooltip({html: true});

});

</script>

{% endblock %}
